"use client"

import type React from "react"
import { createContext, useContext, useState, useEffect } from "react"
import { useRouter, useSearchParams, usePathname } from "next/navigation"

type Language = "en" | "ja"

interface I18nContextType {
  language: Language
  setLanguage: (lang: Language) => void
  t: (key: string) => string
}

const translations = {
  en: {
    // Actions
    "actions.approve": "Approve",
    "actions.back": "Back",
    "actions.cancel": "Cancel",
    "actions.close": "Close",
    "actions.copy": "Copy",
    "actions.deactivate": "Deactivate",
    "actions.reject": "Reject",
    "actions.save": "Save",
    "actions.stopSending": "Stop Sending",

    // Common
    "common.authentication": "Authentication",
    "common.dismiss": "Dismiss",
    "common.error": "Error",
    "common.failedToLoad": "Failed to load applications",
    "common.loading": "Loading...",
    "common.loadingApplications": "Loading applications...",
    "common.pleaseWait": "Please wait...",
    "common.processing": "Processing...",
    "common.refresh": "Refresh",
    "common.retry": "Retry",
    "common.success": "Success",

    // Dashboard
    "dashboard.activeApplications": "Active Licenses",
    "dashboard.allTimeIssued": "All time issued",
    "dashboard.awaitingApproval": "Awaiting approval",
    "dashboard.currentlyActive": "Currently active",
    "dashboard.expiringSoon": "Expiring Soon",
    "dashboard.pendingApplications": "Pending Applications",
    "dashboard.subtitle": "Manage EA license applications and approvals",
    "dashboard.title": "License Management Dashboard",
    "dashboard.totalIssued": "Total Issued",
    "dashboard.within30Days": "Within 30 days",

    // Developer Guide
    "developer.apiReference": "API Reference",
    "developer.apiReferenceDesc": "Available functions and their usage",
    "developer.bestPractices": "Best Practices",
    "developer.bestPracticesDesc": "Recommendations for secure license implementation",
    "developer.cacheResults": "Cache license verification results",
    "developer.dllDesc": "Windows DLL for license verification functions",
    "developer.dllLibrary": "DLL Library",
    "developer.docDesc": "Complete API reference and examples",
    "developer.documentation": "Documentation",
    "developer.downloadDll": "Download DLL",
    "developer.downloadMqh": "Download MQH",
    "developer.getLicenseInfoDesc": "Retrieves detailed information about the license.",
    "developer.getLicenseInfoReturn": "JSON string with license details",
    "developer.handleFailures": "Handle license failures gracefully",
    "developer.handleTimeouts": "Handle network timeouts",
    "developer.integrationGuide": "EA License Integration Guide",
    "developer.integrationGuideDesc": "Complete guide for integrating SANKEY license verification into your Expert Advisors",
    "developer.integrationSteps": "Integration Steps",
    "developer.integrationStepsDesc": "Step-by-step guide to integrate SANKEY license verification",
    "developer.limitFrequency": "Limit verification frequency",
    "developer.mqhDesc": "Include our header file for easy license verification",
    "developer.mqhLibrary": "MQH Library",
    "developer.obfuscateKey": "Obfuscate your license key in the code",
    "developer.offlineGrace": "Implement offline grace period",
    "developer.parameters": "Parameters:",
    "developer.performance": "Performance",
    "developer.periodicChecks": "Perform periodic license checks",
    "developer.returns": "Returns:",
    "developer.security": "Security",
    "developer.step1Comment": "Files needed:",
    "developer.step1Desc": "Download the SANKEY MQH header file and DLL library from the links above.",
    "developer.step1Title": "Download Required Files",
    "developer.step2Desc": "Add the SANKEY header file to your EA and import the necessary functions.",
    "developer.step2Title": "Include Header File",
    "developer.step3Desc": "Add license verification in your EA's OnInit() function.",
    "developer.step3Title": "Initialize License Check",
    "developer.step4Comment1": "Check license every hour",
    "developer.step4Comment2": "Your EA logic here...",
    "developer.step4Desc": "Add periodic license checks to prevent unauthorized usage.",
    "developer.step4Title": "Periodic Verification",
    "developer.subtitle": "Complete guide for integrating SANKEY license verification into your Expert Advisors",
    "developer.title": "Developer Integration Guide",
    "developer.useEncryption": "Use encrypted communication",
    "developer.verifyLicenseDesc": "Verifies if the provided license key is valid for the given account number.",
    "developer.verifyLicenseReturn": "true if license is valid, false otherwise",
    "developer.viewDocs": "View Docs",

    // Dialog
    "dialog.approveDescription": "Are you sure you want to approve this application? A license key will be issued to the user.",
    "dialog.approveTitle": "Approve Application",
    "dialog.deactivateMessage": "Are you sure you want to deactivate the license for",
    "dialog.deactivateTitle": "Confirm License Deactivation",
    "dialog.deactivateWarning": "This action cannot be undone. The license will be deactivated during the next license check.",
    "dialog.decryptedLicense": "Decrypted License",
    "dialog.decryptionFailed": "Failed to decrypt license",
    "dialog.decrypting": "Decrypting...",
    "dialog.licenseInfo": "License Information",
    "dialog.licenseInfoDescription": "Display decrypted license information",
    "dialog.licenseWarning": "This license information is confidential. Please manage it securely.",
    "dialog.rejectMessage": "Are you sure you want to reject the application for",
    "dialog.rejectTitle": "Confirm Application Rejection",
    "dialog.rejectWarning": "This action cannot be undone. The application will be permanently rejected.",
    "dialog.sendingScheduleStatus": "Sending Schedule Status",
    "dialog.stopSendingDescription": "Are you sure you want to stop sending this notification? The scheduled sending will be cancelled.",
    "dialog.stopSendingTitle": "Stop Sending",
    "dialog.target": "Target",

    // Fields
    "fields.account": "Account",
    "fields.applied": "Applied",
    "fields.approved": "Approved",
    "fields.broker": "Broker",
    "fields.expires": "Expires",
    "fields.id": "ID",
    "fields.issued": "Issued",

    // Filters
    "filters.accountNumber": "Account Number",
    "filters.advancedSearch": "Advanced Search",
    "filters.allBrokers": "All Brokers",
    "filters.broker": "Broker",
    "filters.clearFilters": "Clear Filters",
    "filters.eaName": "EA Name",
    "filters.hideAdvanced": "Hide Advanced",
    "filters.searchAccount": "Search account...",
    "filters.searchEaName": "Search EA name...",
    "filters.searchXAccount": "Search X account...",
    "filters.title": "Filters",
    "filters.xAccount": "X Account",

    // Footer
    "footer.copyright": "Â© 2024 SANKEY. All rights reserved.",
    "footer.securedBy": "Secured by advanced encryption",

    // Forgot Password
    "forgotPassword.backToLogin": "Back to Login",
    "forgotPassword.checkEmail": "Check your email for reset instructions",
    "forgotPassword.checkSpam": "If you don't see the email, please check your spam folder.",
    "forgotPassword.codeExpired": "Confirmation code has expired",
    "forgotPassword.codeInvalid": "Invalid confirmation code",
    "forgotPassword.emailInvalid": "Please enter a valid email address",
    "forgotPassword.emailPlaceholder": "Enter your email address",
    "forgotPassword.emailRequired": "Email address is required",
    "forgotPassword.emailSent": "Email Sent!",
    "forgotPassword.emailSentTo": "We've sent password reset instructions to:",
    "forgotPassword.instructions": "We'll send you a link to reset your password.",
    "forgotPassword.nextSteps": "Next Steps:",
    "forgotPassword.resendEmail": "Didn't receive the email? Send again",
    "forgotPassword.sendFailed": "Failed to send reset email. Please try again.",
    "forgotPassword.sendReset": "Send Reset Link",
    "forgotPassword.sending": "Sending...",
    "forgotPassword.step1": "Check your email inbox for a message from SANKEY",
    "forgotPassword.step2": "Click the reset link in the email",
    "forgotPassword.step3": "Follow the instructions to create a new password",
    "forgotPassword.subtitle": "Enter your email to receive reset instructions",
    "forgotPassword.title": "Reset Password",

    // Login
    "login.accessDenied": "Access denied",
    "login.additionalAuth": "Additional authentication required",
    "login.authError": "Authentication error occurred",
    "login.checkingAuth": "Checking authentication...",
    "login.configurationError": "Configuration error occurred",
    "login.demoAccess": "Demo Access",
    "login.demoNote": "Any valid email format and 4+ character password will work",
    "login.email": "Email Address",
    "login.emailPlaceholder": "admin@sankey.com",
    "login.enterpriseSecurity": "Enterprise-grade security",
    "login.enterEmailPassword": "Please enter both email and password",
    "login.forgotPassword": "Forgot your password?",
    "login.hostedUIDescription": "Secure authentication with AWS Cognito",
    "login.invalidCredentials": "Invalid email or password",
    "login.invalidEmail": "Please enter a valid email address",
    "login.loginFailed": "Login failed. Please try again.",
    "login.mfaSupport": "Multi-factor authentication (MFA) support",
    "login.noAuthResult": "No authentication result received",
    "login.noRefreshToken": "No refresh token available",
    "login.password": "Password",
    "login.passwordPlaceholder": "Enter your password",
    "login.redirectNotice": "You will be redirected to a secure login page",
    "login.securedBy": "Secured by advanced encryption",
    "login.securingAccess": "Ensuring secure access",
    "login.securityFeatures": "Security Features",
    "login.sessionExpired": "Session expired, please login again",
    "login.signIn": "Sign In",
    "login.signingIn": "Signing in...",
    "login.signUp": "Sign Up",
    "login.signUpPrompt": "Don't have an account?",
    "login.socialLogin": "Social login support",
    "login.subtitle": "EA License Management System",
    "login.title": "SANKEY",
    "login.tooManyRequests": "Too many requests. Please try again later",
    "login.userNotConfirmed": "Email verification required",
    "login.userNotFound": "User not found",
    "login.verificationError": "Verification error occurred",

    // Logout
    "logout.confirmMessage": "Are you sure you want to log out?",
    "logout.confirmTitle": "Confirm Logout",
    "logout.error": "Logout failed. Please try again.",
    "logout.loggingOut": "Logging out...",
    "logout.success": "Successfully logged out",

    // Navigation
    "nav.dashboard": "License Dashboard",
    "nav.developer": "Developer Guide",
    "nav.menu": "Menu",
    "nav.settings": "Settings",
    "nav.signOut": "Sign Out",

    // Pagination
    "pagination.applications": "applications",
    "pagination.historyRecords": "history records",
    "pagination.licenses": "licenses",
    "pagination.of": "of",
    "pagination.showing": "Showing",
    "pagination.to": "to",

    // Settings
    "settings.active": "active",
    "settings.activeLicenses": "Active Licenses",
    "settings.apiCalls": "API Calls",
    "settings.changePlan": "Change Plan",
    "settings.choosePlan": "Choose the plan that best fits your needs",
    "settings.currentPlan": "Current Plan",
    "settings.customDays": "Custom Days",
    "settings.darkMode": "Dark Mode",
    "settings.days": "days",
    "settings.displaySettings": "Display Settings",
    "settings.displaySettingsDesc": "Customize your dashboard appearance and behavior",
    "settings.itemsPerPage": "Items per page",
    "settings.itemsPerPageDesc": "Number of items to display per page in tables",
    "settings.language": "Language",
    "settings.languageDesc": "Select your preferred language",
    "settings.licenseExpiration": "License Expiration",
    "settings.licenseExpirationDesc": "Set the default expiration period for new licenses",
    "settings.licenseSettings": "License Settings",
    "settings.licenseSettingsDesc": "Configure default license generation settings",
    "settings.lightMode": "Light Mode",
    "settings.masterKey": "Master Key",
    "settings.masterKeyDesc": "This key is used for license generation and verification",
    "settings.monthlyLicenses": "Monthly Licenses",
    "settings.of": "of",
    "settings.planBasicDescription": "Great for small businesses",
    "settings.planDescription": "Manage your subscription and view usage statistics",
    "settings.planFreeDescription": "Perfect for getting started",
    "settings.planProDescription": "Unlimited access for enterprises",
    "settings.subtitle": "Configure your dashboard preferences",
    "settings.theme": "Theme",
    "settings.themeDesc": "Choose your preferred theme",
    "settings.thisMonth": "this month",
    "settings.title": "Settings",
    "settings.unlimited": "Unlimited",
    "settings.updatePlan": "Update Plan",
    "settings.used": "used",

    // Status
    "status.active": "Active",
    "status.awaitingNotification": "Awaiting Notification",
    "status.cancelled": "Cancelled",
    "status.deactivated": "Deactivated",
    "status.expired": "Expired",
    "status.pending": "Pending",
    "status.rejected": "Rejected",
    "status.revoked": "Revoked",

    // Tabs
    "tabs.active": "Active Licenses",
    "tabs.activeDescription": "Currently active EA licenses",
    "tabs.activeShort": "Active",
    "tabs.history": "Issue History",
    "tabs.historyDescription": "Complete history of license issuance",
    "tabs.historyShort": "History",
    "tabs.noActiveLicenses": "No active licenses found",
    "tabs.noLicenseHistory": "No license history found",
    "tabs.noPendingApplications": "No pending applications found",
    "tabs.pending": "Pending Applications",
    "tabs.pendingDescription": "Review and approve EA license applications",
    "tabs.pendingShort": "Pending",

    // Toast Messages
    "toast.error": "Error",
    "toast.info": "Information",
    "toast.licenseKeyCopied": "License key copied!",
    "toast.licenseKeyCopiedDesc": "The license key has been copied to your clipboard.",
    "toast.success": "Success",
    "toast.warning": "Warning",
  },
  ja: {
    // Actions
    "actions.approve": "æ¿èª",
    "actions.back": "æ»ã",
    "actions.cancel": "ã­ã£ã³ã»ã«",
    "actions.close": "éãã",
    "actions.copy": "ã³ãã¼",
    "actions.deactivate": "ç¡å¹å",
    "actions.reject": "å´ä¸",
    "actions.save": "ä¿å­",
    "actions.stopSending": "éä¿¡åæ­¢",

    // Common
    "common.authentication": "èªè¨¼",
    "common.dismiss": "éãã",
    "common.error": "ã¨ã©ã¼",
    "common.failedToLoad": "ã¢ããªã±ã¼ã·ã§ã³ã®èª­ã¿è¾¼ã¿ã«å¤±æãã¾ãã",
    "common.loading": "èª­ã¿è¾¼ã¿ä¸­...",
    "common.loadingApplications": "ã¢ããªã±ã¼ã·ã§ã³èª­ã¿è¾¼ã¿ä¸­...",
    "common.pleaseWait": "ãå¾ã¡ãã ãã...",
    "common.processing": "å¦çä¸­...",
    "common.refresh": "æ´æ°",
    "common.retry": "åè©¦è¡",
    "common.success": "æå",

    // Dashboard
    "dashboard.activeApplications": "æå¹ãªã©ã¤ã»ã³ã¹",
    "dashboard.allTimeIssued": "ç´¯è¨çºè¡æ°",
    "dashboard.awaitingApproval": "æ¿èªå¾ã¡",
    "dashboard.currentlyActive": "ç¾å¨æå¹",
    "dashboard.expiringSoon": "æéåãéè¿",
    "dashboard.pendingApplications": "ç³è«å¾ã¡",
    "dashboard.subtitle": "EAã©ã¤ã»ã³ã¹ã®ç³è«ã¨æ¿èªãç®¡ç",
    "dashboard.title": "ã©ã¤ã»ã³ã¹ç®¡çããã·ã¥ãã¼ã",
    "dashboard.totalIssued": "çºè¡æ¸ã¿ç·æ°",
    "dashboard.within30Days": "30æ¥ä»¥å",

    // Developer Guide
    "developer.accountNumberParam": "MT4/MT5ã¢ã«ã¦ã³ãçªå·",
    "developer.apiReference": "APIãªãã¡ã¬ã³ã¹",
    "developer.apiReferenceDesc": "å©ç¨å¯è½ãªé¢æ°ã¨ãã®ä½¿ç¨æ¹æ³",
    "developer.bestPractices": "ãã¹ããã©ã¯ãã£ã¹",
    "developer.bestPracticesDesc": "å®å¨ãªã©ã¤ã»ã³ã¹å®è£ã®ããã®æ¨å¥¨äºé ",
    "developer.cacheResults": "ã©ã¤ã»ã³ã¹èªè¨¼çµæãã­ã£ãã·ã¥ãã",
    "developer.dllDesc": "ã©ã¤ã»ã³ã¹èªè¨¼æ©è½ç¨Windows DLL",
    "developer.dllLibrary": "DLLã©ã¤ãã©ãª",
    "developer.docDesc": "å®å¨ãªAPIãªãã¡ã¬ã³ã¹ã¨ä¾",
    "developer.documentation": "ãã­ã¥ã¡ã³ã",
    "developer.downloadDll": "DLLããã¦ã³ã­ã¼ã",
    "developer.downloadMqh": "MQHããã¦ã³ã­ã¼ã",
    "developer.getLicenseInfoDesc": "ã©ã¤ã»ã³ã¹ã«é¢ããè©³ç´°æå ±ãåå¾ãã¾ãã",
    "developer.getLicenseInfoReturn": "ã©ã¤ã»ã³ã¹è©³ç´°ãå«ãJSONæå­å",
    "developer.handleFailures": "ã©ã¤ã»ã³ã¹å¤±æãé©åã«å¦çãã",
    "developer.handleTimeouts": "ãããã¯ã¼ã¯ã¿ã¤ã ã¢ã¦ããå¦çãã",
    "developer.integrationGuide": "EAã©ã¤ã»ã³ã¹çµ±åã¬ã¤ã",
    "developer.integrationGuideDesc": "Expert Advisorã«SANKEYã©ã¤ã»ã³ã¹èªè¨¼ãçµ±åããããã®å®å¨ã¬ã¤ã",
    "developer.integrationSteps": "çµ±åæé ",
    "developer.integrationStepsDesc": "SANKEYã©ã¤ã»ã³ã¹èªè¨¼ãçµ±åããããã®ã¹ããããã¤ã¹ãããã¬ã¤ã",
    "developer.licenseKeyParam": "èªè¨¼ããã©ã¤ã»ã³ã¹ã­ã¼",
    "developer.licenseKeyQueryParam": "ã¯ã¨ãªããã©ã¤ã»ã³ã¹ã­ã¼",
    "developer.limitFrequency": "èªè¨¼é »åº¦ãå¶éãã",
    "developer.mqhDesc": "ç°¡åãªã©ã¤ã»ã³ã¹èªè¨¼ã®ããã®ãããã¼ãã¡ã¤ã«",
    "developer.mqhLibrary": "MQHã©ã¤ãã©ãª",
    "developer.obfuscateKey": "ã³ã¼ãåã§ã©ã¤ã»ã³ã¹ã­ã¼ãé£èª­åãã",
    "developer.offlineGrace": "ãªãã©ã¤ã³ç¶äºæéãå®è£ãã",
    "developer.parameters": "ãã©ã¡ã¼ã¿:",
    "developer.performance": "ããã©ã¼ãã³ã¹",
    "developer.periodicChecks": "å®æçãªã©ã¤ã»ã³ã¹ãã§ãã¯ãå®è¡ãã",
    "developer.returns": "æ»ãå¤:",
    "developer.security": "ã»ã­ã¥ãªãã£",
    "developer.step1Comment": "å¿è¦ãªãã¡ã¤ã«:",
    "developer.step1Desc": "ä¸è¨ã®ãªã³ã¯ããSANKEY MQHãããã¼ãã¡ã¤ã«ã¨DLLã©ã¤ãã©ãªããã¦ã³ã­ã¼ããã¾ãã",
    "developer.step1Title": "å¿è¦ãªãã¡ã¤ã«ããã¦ã³ã­ã¼ã",
    "developer.step2Desc": "SANKEYãããã¼ãã¡ã¤ã«ãEAã«è¿½å ããå¿è¦ãªé¢æ°ãã¤ã³ãã¼ããã¾ãã",
    "developer.step2Title": "ãããã¼ãã¡ã¤ã«ãã¤ã³ã¯ã«ã¼ã",
    "developer.step3Desc": "EAã®OnInit()é¢æ°ã«ã©ã¤ã»ã³ã¹èªè¨¼ãè¿½å ãã¾ãã",
    "developer.step3Title": "ã©ã¤ã»ã³ã¹ãã§ãã¯ãåæå",
    "developer.step4Comment1": "1æéãã¨ã«ã©ã¤ã»ã³ã¹ããã§ãã¯",
    "developer.step4Comment2": "ããã«EAã®ã­ã¸ãã¯ãè¨è¿°...",
    "developer.step4Desc": "ä¸æ­£ä½¿ç¨ãé²ãããã«å®æçãªã©ã¤ã»ã³ã¹ãã§ãã¯ãè¿½å ãã¾ãã",
    "developer.step4Title": "å®æçãªèªè¨¼",
    "developer.subtitle": "Expert Advisorã«SANKEYã©ã¤ã»ã³ã¹èªè¨¼ãçµ±åããããã®å®å¨ã¬ã¤ã",
    "developer.title": "éçºèçµ±åã¬ã¤ã",
    "developer.useEncryption": "æå·åéä¿¡ãä½¿ç¨ãã",
    "developer.verifyLicenseDesc": "æå®ãããã©ã¤ã»ã³ã¹ã­ã¼ãæå®ãããã¢ã«ã¦ã³ãçªå·ã«å¯¾ãã¦æå¹ãã©ãããç¢ºèªãã¾ãã",
    "developer.verifyLicenseReturn": "ã©ã¤ã»ã³ã¹ãæå¹ãªå ´åã¯trueãããã§ãªããã°false",
    "developer.viewDocs": "ãã­ã¥ã¡ã³ããè¦ã",

    // Dialog
    "dialog.approveDescription": "ãã®ã¢ããªã±ã¼ã·ã§ã³ãæ¿èªãã¦ãããããã§ããï¼ã¦ã¼ã¶ã¼ã«ã©ã¤ã»ã³ã¹ã­ã¼ãçºè¡ããã¾ãã",
    "dialog.approveTitle": "ã¢ããªã±ã¼ã·ã§ã³ã®æ¿èª",
    "dialog.deactivateMessage": "ä»¥ä¸ã®ã©ã¤ã»ã³ã¹ãç¡å¹åãã¦ãããããã§ãã",
    "dialog.deactivateTitle": "ã©ã¤ã»ã³ã¹ç¡å¹åã®ç¢ºèª",
    "dialog.deactivateWarning": "ãã®æä½ã¯åãæ¶ãã¾ãããæ¬¡åã®ã©ã¤ã»ã³ã¹ãã§ãã¯æã«ç¡å¹åããã¾ãã",
    "dialog.decryptedLicense": "å¾©å·åãããã©ã¤ã»ã³ã¹",
    "dialog.decryptionFailed": "ã©ã¤ã»ã³ã¹ã®å¾©å·åã«å¤±æãã¾ãã",
    "dialog.decrypting": "å¾©å·åãã¦ãã¾ã...",
    "dialog.licenseInfo": "ã©ã¤ã»ã³ã¹æå ±",
    "dialog.licenseInfoDescription": "å¾©å·åãããã©ã¤ã»ã³ã¹æå ±ãè¡¨ç¤ºãã¾ã",
    "dialog.licenseWarning": "ãã®ã©ã¤ã»ã³ã¹æå ±ã¯æ©å¯ã§ããå®å¨ã«ç®¡çãã¦ãã ããã",
    "dialog.rejectMessage": "ä»¥ä¸ã®ç³è«ãå´ä¸ãã¦ãããããã§ãã",
    "dialog.rejectTitle": "ç³è«å´ä¸ã®ç¢ºèª",
    "dialog.rejectWarning": "ãã®æä½ã¯åãæ¶ãã¾ãããç³è«ã¯å®å¨ã«å´ä¸ããã¾ãã",
    "dialog.sendingScheduleStatus": "éä¿¡ã¹ã±ã¸ã¥ã¼ã«ç¶æ³",
    "dialog.stopSendingDescription": "ãã®éç¥ã®éä¿¡ãåæ­¢ãã¦ãããããã§ããï¼ã¹ã±ã¸ã¥ã¼ã«ãããéä¿¡ãä¸­æ­¢ããã¾ãã",
    "dialog.stopSendingTitle": "éä¿¡ã®åæ­¢",
    "dialog.target": "å¯¾è±¡",

    // Fields
    "fields.account": "ã¢ã«ã¦ã³ã",
    "fields.applied": "ç³è«æ¥",
    "fields.approved": "æ¿èªæ¥",
    "fields.broker": "ãã­ã¼ã«ã¼",
    "fields.expires": "æå¹æé",
    "fields.id": "ID",
    "fields.issued": "çºè¡æ¥",

    // Filters
    "filters.accountNumber": "ã¢ã«ã¦ã³ãçªå·",
    "filters.advancedSearch": "è©³ç´°æ¤ç´¢",
    "filters.allBrokers": "å¨ã¦ã®ãã­ã¼ã«ã¼",
    "filters.broker": "ãã­ã¼ã«ã¼",
    "filters.clearFilters": "ãã£ã«ã¿ã¼ãã¯ãªã¢",
    "filters.eaName": "EAå",
    "filters.hideAdvanced": "è©³ç´°æ¤ç´¢ãé ã",
    "filters.searchAccount": "ã¢ã«ã¦ã³ããæ¤ç´¢...",
    "filters.searchEaName": "EAåãæ¤ç´¢...",
    "filters.searchXAccount": "Xã¢ã«ã¦ã³ããæ¤ç´¢...",
    "filters.title": "ãã£ã«ã¿ã¼",
    "filters.xAccount": "Xã¢ã«ã¦ã³ã",

    // Footer
    "footer.copyright": "Â© 2024 SANKEY. All rights reserved.",
    "footer.securedBy": "é«åº¦ãªæå·åã«ããä¿è­·",

    // Forgot Password
    "forgotPassword.backToLogin": "ã­ã°ã¤ã³ã«æ»ã",
    "forgotPassword.checkEmail": "ãªã»ããæé ã«ã¤ãã¦ã¡ã¼ã«ããç¢ºèªãã ãã",
    "forgotPassword.checkSpam": "ã¡ã¼ã«ãè¦ã¤ãããªãå ´åã¯ãè¿·æã¡ã¼ã«ãã©ã«ãããç¢ºèªãã ããã",
    "forgotPassword.codeExpired": "ç¢ºèªã³ã¼ãã®æå¹æéãåãã¦ãã¾ã",
    "forgotPassword.codeInvalid": "ç¢ºèªã³ã¼ããæ­£ããããã¾ãã",
    "forgotPassword.emailInvalid": "æå¹ãªã¡ã¼ã«ã¢ãã¬ã¹ãå¥åãã¦ãã ãã",
    "forgotPassword.emailPlaceholder": "ã¡ã¼ã«ã¢ãã¬ã¹ãå¥å",
    "forgotPassword.emailRequired": "ã¡ã¼ã«ã¢ãã¬ã¹ãå¿è¦ã§ã",
    "forgotPassword.emailSent": "ã¡ã¼ã«éä¿¡å®äºï¼",
    "forgotPassword.emailSentTo": "ãã¹ã¯ã¼ããªã»ããæé ãä»¥ä¸ã®ã¢ãã¬ã¹ã«éä¿¡ãã¾ããï¼",
    "forgotPassword.instructions": "ãã¹ã¯ã¼ãããªã»ããããããã®ãªã³ã¯ããéããã¾ãã",
    "forgotPassword.nextSteps": "æ¬¡ã®ã¹ãããï¼",
    "forgotPassword.resendEmail": "ã¡ã¼ã«ãå±ãã¾ãããï¼åéä¿¡",
    "forgotPassword.sendFailed": "ãªã»ããã¡ã¼ã«ã®éä¿¡ã«å¤±æãã¾ãããããä¸åº¦ãè©¦ããã ããã",
    "forgotPassword.sendReset": "ãªã»ãããªã³ã¯ãéä¿¡",
    "forgotPassword.sending": "éä¿¡ä¸­...",
    "forgotPassword.step1": "SANKEYããã®ã¡ã¼ã«ãã¡ã¼ã«ããã¯ã¹ã§ç¢ºèª",
    "forgotPassword.step2": "ã¡ã¼ã«åã®ãªã»ãããªã³ã¯ãã¯ãªãã¯",
    "forgotPassword.step3": "æé ã«å¾ã£ã¦æ°ãããã¹ã¯ã¼ããä½æ",
    "forgotPassword.subtitle": "ãªã»ããæé ãåãåãããã«ã¡ã¼ã«ã¢ãã¬ã¹ãå¥åãã¦ãã ãã",
    "forgotPassword.title": "ãã¹ã¯ã¼ããªã»ãã",

    // Login
    "login.accessDenied": "ã¢ã¯ã»ã¹ãæå¦ããã¾ãã",
    "login.additionalAuth": "è¿½å ã®èªè¨¼ãå¿è¦ã§ã",
    "login.authError": "èªè¨¼ã¨ã©ã¼ãçºçãã¾ãã",
    "login.checkingAuth": "èªè¨¼ç¶æãç¢ºèªä¸­...",
    "login.configurationError": "è¨­å®ã¨ã©ã¼ãçºçãã¾ãã",
    "login.demoAccess": "ãã¢ã¢ã¯ã»ã¹",
    "login.demoNote": "æå¹ãªã¡ã¼ã«å½¢å¼ã¨4æå­ä»¥ä¸ã®ãã¹ã¯ã¼ãã§åä½ãã¾ã",
    "login.email": "ã¡ã¼ã«ã¢ãã¬ã¹",
    "login.emailPlaceholder": "admin@sankey.com",
    "login.enterpriseSecurity": "ã¨ã³ã¿ã¼ãã©ã¤ãºã°ã¬ã¼ãã®ã»ã­ã¥ãªãã£",
    "login.enterEmailPassword": "ã¡ã¼ã«ã¢ãã¬ã¹ã¨ãã¹ã¯ã¼ããå¥åãã¦ãã ãã",
    "login.forgotPassword": "ãã¹ã¯ã¼ããå¿ãã¾ãããï¼",
    "login.hostedUIDescription": "AWS Cognitoã«ããã»ã­ã¥ã¢ãªèªè¨¼",
    "login.invalidCredentials": "ã¡ã¼ã«ã¢ãã¬ã¹ã¾ãã¯ãã¹ã¯ã¼ããæ­£ããããã¾ãã",
    "login.invalidEmail": "æå¹ãªã¡ã¼ã«ã¢ãã¬ã¹ãå¥åãã¦ãã ãã",
    "login.loginFailed": "ã­ã°ã¤ã³ã«å¤±æãã¾ãããåè©¦è¡ãã¦ãã ããã",
    "login.mfaSupport": "å¤è¦ç´ èªè¨¼ (MFA) å¯¾å¿",
    "login.noAuthResult": "èªè¨¼çµæãåä¿¡ã§ãã¾ããã§ãã",
    "login.noRefreshToken": "ãªãã¬ãã·ã¥ãã¼ã¯ã³ãããã¾ãã",
    "login.password": "ãã¹ã¯ã¼ã",
    "login.passwordPlaceholder": "ãã¹ã¯ã¼ããå¥å",
    "login.redirectNotice": "ã»ã­ã¥ã¢ãªã­ã°ã¤ã³ãã¼ã¸ã«ãªãã¤ã¬ã¯ãããã¾ã",
    "login.securedBy": "é«åº¦ãªæå·åã«ããä¿è­·",
    "login.securingAccess": "ã»ã­ã¥ã¢ãªã¢ã¯ã»ã¹ãç¢ºä¿ãã¦ãã¾ã",
    "login.securityFeatures": "ã»ã­ã¥ãªãã£æ©è½",
    "login.sessionExpired": "ã»ãã·ã§ã³ãæéåãã§ããååº¦ã­ã°ã¤ã³ãã¦ãã ãã",
    "login.signIn": "ãµã¤ã³ã¤ã³",
    "login.signingIn": "ãµã¤ã³ã¤ã³ä¸­...",
    "login.signUp": "æ°è¦ç»é²",
    "login.signUpPrompt": "ã¢ã«ã¦ã³ãããæã¡ã§ãªãå ´å",
    "login.socialLogin": "ã½ã¼ã·ã£ã«ã­ã°ã¤ã³å¯¾å¿",
    "login.subtitle": "EAã©ã¤ã»ã³ã¹ç®¡çã·ã¹ãã ",
    "login.title": "SANKEY",
    "login.tooManyRequests": "ãªã¯ã¨ã¹ããå¤ããã¾ãããã°ããå¾ã£ã¦ããåè©¦è¡ãã¦ãã ãã",
    "login.userNotConfirmed": "ã¡ã¼ã«ã¢ãã¬ã¹ã®ç¢ºèªãå¿è¦ã§ã",
    "login.userNotFound": "ã¦ã¼ã¶ã¼ãè¦ã¤ããã¾ãã",
    "login.verificationError": "èªè¨¼ã¨ã©ã¼ãçºçãã¾ãã",

    // Logout
    "logout.confirmMessage": "ã­ã°ã¢ã¦ããã¦ãããããã§ããï¼",
    "logout.confirmTitle": "ã­ã°ã¢ã¦ãã®ç¢ºèª",
    "logout.error": "ã­ã°ã¢ã¦ãã«å¤±æãã¾ãããåè©¦è¡ãã¦ãã ããã",
    "logout.loggingOut": "ã­ã°ã¢ã¦ãä¸­...",
    "logout.success": "ã­ã°ã¢ã¦ããã¾ãã",

    // Navigation
    "nav.dashboard": "ã©ã¤ã»ã³ã¹ç®¡ç",
    "nav.developer": "éçºèã¬ã¤ã",
    "nav.documentation": "ãã­ã¥ã¡ã³ã",
    "nav.menu": "ã¡ãã¥ã¼",
    "nav.profile": "ãã­ãã£ã¼ã«",
    "nav.settings": "è¨­å®",
    "nav.signOut": "ãµã¤ã³ã¢ã¦ã",
    "nav.support": "ãµãã¼ã",

    // Pagination
    "pagination.applications": "ä»¶ã®ç³è«",
    "pagination.historyRecords": "ä»¶ã®å±¥æ­´",
    "pagination.licenses": "ä»¶ã®ã©ã¤ã»ã³ã¹",
    "pagination.of": "/",
    "pagination.showing": "è¡¨ç¤ºä¸­",
    "pagination.to": "ã",

    // Settings
    "settings.active": "æå¹",
    "settings.activeLicenses": "æå¹ã©ã¤ã»ã³ã¹",
    "settings.apiCalls": "APIå¼ã³åºã",
    "settings.changePlan": "ãã©ã³å¤æ´",
    "settings.choosePlan": "ãã¼ãºã«æé©ãªãã©ã³ãé¸æãã¦ãã ãã",
    "settings.currentPlan": "ç¾å¨ã®ãã©ã³",
    "settings.customDays": "ã«ã¹ã¿ã æ¥æ°",
    "settings.darkMode": "ãã¼ã¯ã¢ã¼ã",
    "settings.days": "æ¥",
    "settings.displaySettings": "è¡¨ç¤ºè¨­å®",
    "settings.displaySettingsDesc": "ããã·ã¥ãã¼ãã®å¤è¦³ã¨åä½ãã«ã¹ã¿ãã¤ãº",
    "settings.itemsPerPage": "ãã¼ã¸ãããã®é ç®æ°",
    "settings.itemsPerPageDesc": "ãã¼ãã«ã«è¡¨ç¤ºããé ç®æ°",
    "settings.language": "è¨èª",
    "settings.languageDesc": "ãå¥½ã¿ã®è¨èªãé¸æ",
    "settings.licenseExpiration": "ã©ã¤ã»ã³ã¹æå¹æé",
    "settings.licenseExpirationDesc": "æ°ããã©ã¤ã»ã³ã¹ã®ããã©ã«ãæå¹æéãè¨­å®",
    "settings.licenseSettings": "ã©ã¤ã»ã³ã¹è¨­å®",
    "settings.licenseSettingsDesc": "ããã©ã«ãã®ã©ã¤ã»ã³ã¹çæè¨­å®ãæ§æ",
    "settings.lightMode": "ã©ã¤ãã¢ã¼ã",
    "settings.masterKey": "ãã¹ã¿ã¼ã­ã¼",
    "settings.masterKeyDesc": "ãã®ã­ã¼ã¯ã©ã¤ã»ã³ã¹ã®çæã¨æ¤è¨¼ã«ä½¿ç¨ããã¾ã",
    "settings.monthlyLicenses": "æéã©ã¤ã»ã³ã¹",
    "settings.of": "/",
    "settings.planBasicDescription": "å°è¦æ¨¡ãã¸ãã¹ã«æé©",
    "settings.planDescription": "ãµãã¹ã¯ãªãã·ã§ã³ãç®¡çããä½¿ç¨çµ±è¨ãç¢ºèª",
    "settings.planFreeDescription": "å§ããã®ã«æé©",
    "settings.planProDescription": "ä¼æ¥­åãç¡å¶éã¢ã¯ã»ã¹",
    "settings.subtitle": "ããã·ã¥ãã¼ãã®è¨­å®ãå¤æ´",
    "settings.theme": "ãã¼ã",
    "settings.themeDesc": "ãå¥½ã¿ã®ãã¼ããé¸æ",
    "settings.thisMonth": "ä»æ",
    "settings.title": "è¨­å®",
    "settings.unlimited": "ç¡å¶é",
    "settings.updatePlan": "ãã©ã³æ´æ°",
    "settings.used": "ä½¿ç¨æ¸ã¿",

    // Status
    "status.active": "æå¹",
    "status.awaitingNotification": "éä¿¡å¾ã¡",
    "status.cancelled": "ä¸­æ­¢",
    "status.deactivated": "ç¡å¹å",
    "status.expired": "æéåã",
    "status.pending": "ç³è«ä¸­",
    "status.rejected": "å´ä¸",
    "status.revoked": "åãæ¶ã",

    // Tabs
    "tabs.active": "æå¹ãªã©ã¤ã»ã³ã¹",
    "tabs.activeDescription": "ç¾å¨æå¹ãªEAã©ã¤ã»ã³ã¹",
    "tabs.activeShort": "æå¹",
    "tabs.history": "çºè¡å±¥æ­´",
    "tabs.historyDescription": "ã©ã¤ã»ã³ã¹çºè¡ã®å®å¨ãªå±¥æ­´",
    "tabs.historyShort": "å±¥æ­´",
    "tabs.noActiveLicenses": "æå¹ãªã©ã¤ã»ã³ã¹ã¯ããã¾ãã",
    "tabs.noLicenseHistory": "ã©ã¤ã»ã³ã¹å±¥æ­´ã¯ããã¾ãã",
    "tabs.noPendingApplications": "ç³è«å¾ã¡ã®é ç®ã¯ããã¾ãã",
    "tabs.pending": "ç³è«å¾ã¡",
    "tabs.pendingDescription": "EAã©ã¤ã»ã³ã¹ç³è«ã®ç¢ºèªã¨æ¿èª",
    "tabs.pendingShort": "ç³è«å¾ã¡",

    // Toast Messages
    "toast.error": "ã¨ã©ã¼",
    "toast.info": "æå ±",
    "toast.licenseKeyCopied": "ã©ã¤ã»ã³ã¹ã­ã¼ãã³ãã¼ãã¾ããï¼",
    "toast.licenseKeyCopiedDesc": "ã©ã¤ã»ã³ã¹ã­ã¼ãã¯ãªãããã¼ãã«ã³ãã¼ããã¾ããã",
    "toast.success": "æå",
    "toast.warning": "è­¦å",
  },
}

const I18nContext = createContext<I18nContextType | undefined>(undefined)

const isValidLanguage = (lang: string | null): lang is Language => {
  return lang === "en" || lang === "ja"
}

export function I18nProvider({ children }: { children: React.ReactNode }) {
  const [language, setLanguage] = useState<Language>("en")
  const router = useRouter()
  const pathname = usePathname()
  const searchParams = useSearchParams()

  useEffect(() => {
    let determinedLanguage: Language | null = null
    const langFromUrl = searchParams.get("lang")

    if (isValidLanguage(langFromUrl)) {
      determinedLanguage = langFromUrl
    } else {
      const langFromLocalStorage = localStorage.getItem("language") as Language
      if (isValidLanguage(langFromLocalStorage)) {
        determinedLanguage = langFromLocalStorage
      } else {
        const browserLang = navigator.language
        if (browserLang.startsWith("ja")) {
          determinedLanguage = "ja"
        } else {
          determinedLanguage = "en"
        }
      }
    }

    if (determinedLanguage && language !== determinedLanguage) {
      setLanguage(determinedLanguage)
    }

    // Update URL if lang is not in searchParams or if it's different from determinedLanguage
    // This also runs on initial load to set the lang param if missing
    const currentQuery = new URLSearchParams(Array.from(searchParams.entries()))
    if (langFromUrl !== determinedLanguage) {
      currentQuery.set("lang", determinedLanguage as Language)
      const newSearch = currentQuery.toString()
      router.replace(`${pathname}?${newSearch}`)
    }
  // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [pathname, searchParams, router]) // Only run on mount and when essential routing params change

  useEffect(() => {
    localStorage.setItem("language", language)
    const currentQuery = new URLSearchParams(Array.from(searchParams.entries()))
    const langFromUrl = currentQuery.get("lang")

    if (langFromUrl !== language) {
      currentQuery.set("lang", language)
      // Remove other lang parameters if any exist to avoid duplicates
      const keysToDelete: string[] = []
      currentQuery.forEach((value, key) => {
        if (key !== "lang" && key.toLowerCase() === "lang") {
          keysToDelete.push(key)
        }
      })
      keysToDelete.forEach(key => currentQuery.delete(key))

      const newSearch = currentQuery.toString()
      router.replace(`${pathname}?${newSearch}`)
    }
  // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [language]) // Removed router, pathname, searchParams to avoid loop, only sync when internal language changes

  const t = (key: string): string => {
    return translations[language][key as keyof (typeof translations)[typeof language]] || key
  }

  return <I18nContext.Provider value={{ language, setLanguage, t }}>{children}</I18nContext.Provider>
}

export function useI18n() {
  const context = useContext(I18nContext)
  if (context === undefined) {
    throw new Error("useI18n must be used within an I18nProvider")
  }
  return context
}